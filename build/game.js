BasicGame.Game=function(s){},BasicGame.Game.prototype={create:function(){this.setupBackground(),this.setupPlayer(),this.setupShipExhaust(),this.setupEnemies(),this.setupBullets(),this.setupBomb(),this.setupExplosions(),this.setupBombBlast(),this.setupPlayerIcons(),this.setupText(),this.setupAudio(),this.cursors=this.input.keyboard.createCursorKeys(),this.muteKey=this.input.keyboard.addKey(Phaser.Keyboard.M),this.unMuteKey=this.input.keyboard.addKey(Phaser.Keyboard.N),this.bombKey=this.input.keyboard.addKey(Phaser.Keyboard.F),this.shieldKey=this.input.keyboard.addKey(Phaser.Keyboard.D)},update:function(){this.checkCollisions(),this.spawnEnemies(),this.enemyFire(),this.processPlayerInput(),this.processDelayedEffects()},render:function(){this.game.debug.text(this.game.time.fps||"--",2,14,"#00ff00")},setupBackground:function(){this.space=this.add.tileSprite(0,0,this.game.width,this.game.height,"space"),this.space.autoScroll(0,BasicGame.SPACE_SCROLL_SPEED)},setupPlayer:function(){this.player=this.add.sprite(this.game.width/2,this.game.height-130,"player"),this.player.anchor.setTo(.5,.5),this.player.animations.add("fly",[0,1,2],20,!0),this.player.animations.add("ghost",[3,1,3,2],20,!0),this.player.animations.add("shield",[4,5,6],20,!0),this.player.play("fly"),this.physics.enable(this.player,Phaser.Physics.ARCADE),this.player.body.collideWorldBounds=!0,this.player.body.setSize(30,45,0,0),this.player.body.maxVelocity.setTo(BasicGame.PLAYER_MAXSPEED,BasicGame.PLAYER_MAXSPEED),this.player.body.drag.setTo(BasicGame.PLAYER_DRAG,BasicGame.PLAYER_DRAG)},setupShipExhaust:function(){this.shipExhaust=this.game.add.emitter(this.player.x,this.player.y,400),this.shipExhaust.makeParticles("shipExhaust"),this.shipExhaust.width=20,this.shipExhaust.setXSpeed(30,-30),this.shipExhaust.setYSpeed(200,180),this.shipExhaust.setRotation(50,-50),this.shipExhaust.setAlpha(1,.01,800),this.shipExhaust.setScale(1,1,1,1,8e3,Phaser.Easing.Quintic.Out),this.shipExhaust.start(!1,5e3,10)},setupEnemies:function(){this.enemyPool=this.add.group(),this.enemyPool.enableBody=!0,this.enemyPool.physicsBodyType=Phaser.Physics.ARCADE,this.enemyPool.createMultiple(500,"greenEnemy"),this.enemyPool.setAll("anchor.x",.5),this.enemyPool.setAll("anchor.y",.5),this.enemyPool.setAll("outOfBoundsKill",!0),this.enemyPool.setAll("checkWorldBounds",!0),this.enemyPool.setAll("reward",BasicGame.ENEMY_REWARD,!1,!1,0,!0),this.enemyPool.setAll("dropRate",BasicGame.ENEMY_WEAPON_DROP_RATE,!1,!1,0,!0),this.enemyPool.setAll("bombDropRate",BasicGame.BOMB_DROP_RATE,!1,!1,0,!0),this.enemyPool.setAll("shieldDropRate",BasicGame.SHIELD_DROP_RATE,!1,!1,0,!0),this.enemyPool.forEach(function(s){s.animations.add("fly",[0,1,2],20,!0),s.animations.add("hit",[3,1,3,2],20,!1),s.events.onAnimationComplete.add(function(s){s.play("fly")},this)}),this.nextEnemyAt=0,this.enemyDelay=BasicGame.SPAWN_ENEMY_DELAY,this.shooterPool=this.add.group(),this.shooterPool.enableBody=!0,this.shooterPool.physicsBodyType=Phaser.Physics.ARCADE,this.shooterPool.createMultiple(500,"whiteEnemy"),this.shooterPool.setAll("anchor.x",.5),this.shooterPool.setAll("anchor.y",.5),this.shooterPool.setAll("outOfBoundsKill",!0),this.shooterPool.setAll("checkWorldBounds",!0),this.shooterPool.setAll("reward",BasicGame.SHOOTER_REWARD,!1,!1,0,!0),this.shooterPool.setAll("dropRate",BasicGame.SHOOTER_WEAPON_DROP_RATE,!1,!1,0,!0),this.shooterPool.setAll("bombDropRate",BasicGame.BOMB_DROP_RATE,!1,!1,0,!0),this.shooterPool.setAll("shieldDropRate",BasicGame.SHIELD_DROP_RATE,!1,!1,0,!0),this.nextShooterAt=this.time.now+5*Phaser.Timer.SECOND,this.shooterDelay=BasicGame.SPAWN_SHOOTER_DELAY,this.bossPool=this.add.group(),this.bossPool.enableBody=!0,this.bossPool.physicsBodyType=Phaser.Physics.ARCADE,this.bossPool.createMultiple(1,"boss"),this.bossPool.setAll("anchor.x",.5),this.bossPool.setAll("anchor.y",.5),this.bossPool.setAll("outOfBoundsKill",!0),this.bossPool.setAll("checkWorldBounds",!0),this.bossPool.setAll("reward",BasicGame.BOSS_REWARD,!1,!1,0,!0),this.bossPool.setAll("dropRate",BasicGame.BOSS_DROP_RATE,!1,!1,0,!0),this.bossPool.forEach(function(s){s.animations.add("hit",[1,0],20,!1)}),this.boss=this.bossPool.getTop(),this.bossApproaching=!1},setupBullets:function(){this.enemyBulletPool=this.add.group(),this.enemyBulletPool.enableBody=!0,this.enemyBulletPool.physicsBodyType=Phaser.Physics.ARCADE,this.enemyBulletPool.createMultiple(500,"enemyBullet"),this.enemyBulletPool.setAll("anchor.x",.5),this.enemyBulletPool.setAll("anchor.y",.5),this.enemyBulletPool.setAll("outOfBoundsKill",!0),this.enemyBulletPool.setAll("checkWorldBounds",!0),this.enemyBulletPool.setAll("reward",0,!1,!1,0,!0),this.bulletPool=this.add.group(),this.bulletPool.enableBody=!0,this.bulletPool.physicsBodyType=Phaser.Physics.ARCADE,this.bulletPool.createMultiple(100,"bullet"),this.bulletPool.setAll("anchor.x",.5),this.bulletPool.setAll("anchor.y",.5),this.bulletPool.setAll("outOfBoundsKill",!0),this.bulletPool.setAll("checkWorldBounds",!0),this.nextShotAt=0,this.shotDelay=BasicGame.SHOT_DELAY},setupBomb:function(){this.bombPool=this.add.group(),this.bombPool.enableBody=!0,this.bombPool.physicsBodyType=Phaser.Physics.ARCADE,this.bombPool.createMultiple(10,"bomb"),this.bombPool.setAll("anchor.x",.5),this.bombPool.setAll("anchor.y",.5),this.bombPool.setAll("outOfBoundsKill",!0),this.bombPool.setAll("checkWorldBounds",!0),this.nextBombAt=0,this.bombShotDelay=Phaser.Timer.SECOND},setupExplosions:function(){this.explosionPool=this.add.group(),this.explosionPool.enableBody=!0,this.explosionPool.physicsBodyType=Phaser.Physics.ARCADE,this.explosionPool.createMultiple(100,"explosion"),this.explosionPool.setAll("anchor.x",.5),this.explosionPool.setAll("anchor.y",.5),this.explosionPool.forEach(function(s){s.animations.add("boom")})},setupBombBlast:function(){this.bombBlastPool=this.add.group(),this.bombBlastPool.enableBody=!0,this.bombBlastPool.physicsBodyType=Phaser.Physics.ARCADE,this.bombBlastPool.createMultiple(10,"bombBlast"),this.bombBlastPool.setAll("anchor.x",.5),this.bombBlastPool.setAll("anchor.y",.5),this.bombBlastPool.forEach(function(s){s.animations.add("bang",[0,1,2],5,!0)})},setupPlayerIcons:function(){this.powerUpPool=this.add.group(),this.powerUpPool.enableBody=!0,this.powerUpPool.physicsBodyType=Phaser.Physics.ARCADE,this.powerUpPool.createMultiple(5,"powerup1"),this.powerUpPool.setAll("anchor.x",.5),this.powerUpPool.setAll("anchor.y",.5),this.powerUpPool.setAll("outOfBoundsKill",!0),this.powerUpPool.setAll("checkWorldBounds",!0),this.powerUpPool.setAll("reward",BasicGame.POWERUP_REWARD,!1,!1,0,!0),this.bombPowerUpPool=this.add.group(),this.bombPowerUpPool.enableBody=!0,this.bombPowerUpPool.physicsBodyType=Phaser.Physics.ARCADE,this.bombPowerUpPool.createMultiple(1,"bombPowerUp"),this.bombPowerUpPool.setAll("anchor.x",.5),this.bombPowerUpPool.setAll("anchor.y",.5),this.bombPowerUpPool.setAll("outOfBoundsKill",!0),this.bombPowerUpPool.setAll("checkWorldBounds",!0),this.bombPowerUpPool.setAll("reward",BasicGame.POWERUP_REWARD,!1,!1,0,!0),this.shieldPowerUpPool=this.add.group(),this.shieldPowerUpPool.enableBody=!0,this.shieldPowerUpPool.physicsBodyType=Phaser.Physics.ARCADE,this.shieldPowerUpPool.createMultiple(1,"shieldPowerUp"),this.shieldPowerUpPool.setAll("anchor.x",.5),this.shieldPowerUpPool.setAll("anchor.y",.5),this.shieldPowerUpPool.setAll("outOfBoundsKill",!0),this.shieldPowerUpPool.setAll("checkWorldBounds",!0),this.shieldPowerUpPool.setAll("reward",BasicGame.POWERUP_REWARD,!1,!1,0,!0),this.lives=this.add.group();for(var s=this.game.width-10-30*BasicGame.PLAYER_EXTRA_LIVES,t=0;t<BasicGame.PLAYER_EXTRA_LIVES;t++){var e=this.lives.create(s+30*t,30,"player");e.scale.setTo(.5,.5),e.anchor.setTo(.5,.5)}},setupText:function(){this.instructions=this.add.text(this.game.width/2,this.game.height-50,"Use Arrow Keys to Move, Press SPACEBAR to Fire\nTapping/clicking does both",{font:"20px monospace",fill:"#BF55EC",align:"center"}),this.instructions.anchor.setTo(.5,.5),this.instExpire=this.time.now+BasicGame.INSTRUCTION_EXPIRE,this.score=0,this.highscoreText=this.add.text(this.game.width-770,10,"Score",{font:"20px monospace",fill:"#fff",align:"center"}),this.scoreText=this.add.text(this.game.width-740,50,""+this.score,{font:"20px monospace",fill:"#fff",align:"center"}),this.scoreText.anchor.setTo(.5,.5),this.weaponLevel=0,this.powerupText=this.add.text(this.game.width-80,60,"PowerUp: "+this.weaponLevel,{font:"20px monospace",fill:"#fff",align:"center"}),this.powerupText.anchor.setTo(.5,.5),this.bombCount=0,this.bombPowerupText=this.add.text(this.game.width-68,110,"Bombs: "+this.bombCount,{font:"20px monospace",fill:"#fff",align:"center"}),this.bombPowerupText.anchor.setTo(.5,.5),this.shieldCount=0,this.shieldPowerupText=this.add.text(this.game.width-80,85,"Shields: "+this.shieldCount,{font:"20px monospace",fill:"#fff",align:"center"}),this.shieldPowerupText.anchor.setTo(.5,.5),this.bossHealthText=this.add.text(this.game.width/2,10,"",{font:"20px monospace",fill:"#fff",align:"center"}),this.bossHealthText.anchor.setTo(.5,.5)},setupAudio:function(){this.explosionSFX=this.add.audio("explosion"),this.playerExplosionSFX=this.add.audio("playerExplosion"),this.enemyFireSFX=this.add.audio("enemyFire"),this.playerFireSFX=this.add.audio("playerFire"),this.powerUpSFX=this.add.audio("powerUp"),this.soundtrack=this.add.audio("gameMusic"),this.soundtrack.play("",0,.8,!0)},checkCollisions:function(){this.physics.arcade.overlap(this.bulletPool,this.enemyPool,this.enemyHit,null,this),this.physics.arcade.overlap(this.bulletPool,this.shooterPool,this.enemyHit,null,this),this.physics.arcade.overlap(this.bombPool,this.enemyPool,this.bombHit,null,this),this.physics.arcade.overlap(this.bombPool,this.shooterPool,this.bombHit,null,this),this.physics.arcade.overlap(this.bombBlastPool,this.enemyPool,this.bombBlastHit,null,this),this.physics.arcade.overlap(this.bombBlastPool,this.shooterPool,this.bombBlastHit,null,this),this.physics.arcade.overlap(this.player,this.enemyPool,this.playerHit,null,this),this.physics.arcade.overlap(this.player,this.shooterPool,this.playerHit,null,this),this.physics.arcade.overlap(this.player,this.enemyBulletPool,this.playerHit,null,this),this.physics.arcade.overlap(this.player,this.powerUpPool,this.playerGetsWeaponPowerUp,null,this),this.physics.arcade.overlap(this.player,this.bombPowerUpPool,this.playerGetsBomb,null,this),this.physics.arcade.overlap(this.player,this.shieldPowerUpPool,this.playerGetsShield,null,this),this.bossApproaching===!1&&(this.physics.arcade.overlap(this.bulletPool,this.bossPool,this.enemyHit,null,this),this.physics.arcade.overlap(this.bombPool,this.bossPool,this.bombHit,null,this),this.physics.arcade.overlap(this.bombBlastPool,this.bossPool,this.bombBlastHit,null,this),this.physics.arcade.overlap(this.player,this.bossPool,this.playerHit,null,this))},spawnEnemies:function(){var s=!1;if(this.score>500&&(s=!0),this.nextEnemyAt<this.time.now&&this.enemyPool.countDead()>0){this.nextEnemyAt=this.time.now+this.enemyDelay;var t=this.enemyPool.getFirstExists(!1);t.reset(this.rnd.integerInRange(20,this.game.width-20),0,BasicGame.ENEMY_HEALTH),t.body.velocity.y=this.rnd.integerInRange(BasicGame.ENEMY_MIN_Y_VELOCITY,BasicGame.ENEMY_MAX_Y_VELOCITY),t.play("fly")}else if(this.score>=5e4&&this.score<=55e3){this.nextEnemyAt=this.time.now+Phaser.Timer.SECOND-10;var t=this.enemyPool.getFirstExists(!1);t.reset(this.rnd.integerInRange(20,this.game.width-20),0,BasicGame.ENEMY_HEALTH),t.body.velocity.y=this.rnd.integerInRange(BasicGame.ENEMY_MIN_Y_VELOCITY,BasicGame.ENEMY_MAX_Y_VELOCITY),t.play("fly")}if(s===!0&&this.nextShooterAt<this.time.now&&this.shooterPool.countDead()>0){this.nextShooterAt=this.time.now+this.shooterDelay;var e=this.shooterPool.getFirstExists(!1);e.reset(this.rnd.integerInRange(20,this.game.width-20),0,BasicGame.SHOOTER_HEALTH);var i=this.rnd.integerInRange(20,this.game.width-20);e.rotation=this.physics.arcade.moveToXY(e,i,this.game.height,this.rnd.integerInRange(BasicGame.SHOOTER_MIN_VELOCITY,BasicGame.SHOOTER_MAX_VELOCITY))-Math.PI/2,e.play("fly"),e.nextShotAt=0}},enemyFire:function(){if(this.shooterPool.forEachAlive(function(s){if(this.time.now>s.nextShotAt&&this.enemyBulletPool.countDead()>0){var t=this.enemyBulletPool.getFirstExists(!1);t.reset(s.x,s.y+30),this.physics.arcade.moveToObject(t,this.player,BasicGame.ENEMY_BULLET_VELOCITY),s.nextShotAt=this.time.now+BasicGame.SHOOTER_SHOT_DELAY,this.enemyFireSFX.play()}},this),this.bossApproaching===!1&&this.boss.alive&&this.boss.nextShotAt<this.time.now&&this.enemyBulletPool.countDead()>=10){this.boss.nextShotAt=this.time.now+BasicGame.BOSS_SHOT_DELAY,this.enemyFireSFX.play();for(var s=0;5>s;s++){var t=this.enemyBulletPool.getFirstExists(!1);t.reset(this.boss.x-10-10*s,this.boss.y+60);var e=this.enemyBulletPool.getFirstExists(!1);e.reset(this.boss.x+10+10*s,this.boss.y+60),this.boss.health>300?(this.physics.arcade.moveToObject(t,this.player,BasicGame.ENEMY_BULLET_VELOCITY),this.physics.arcade.moveToObject(e,this.player,BasicGame.ENEMY_BULLET_VELOCITY)):(this.physics.arcade.moveToXY(t,this.player.x-100*s,this.player.y,BasicGame.ENEMY_BULLET_VELOCITY),this.physics.arcade.moveToXY(e,this.player.x+100*s,this.player.y,BasicGame.ENEMY_BULLET_VELOCITY))}}},processPlayerInput:function(){this.player.body.acceleration.x=0,this.player.body.acceleration.y=0,this.shipExhaust.x=this.player.x,this.shipExhaust.y=this.player.y+45,this.player.rotation=0,this.shipExhaust.on=!1,this.cursors.left.isDown?(this.player.body.acceleration.x=-BasicGame.PLAYER_ACCELERATION,this.player.rotation-=.324,this.shipExhaust.on=!0,this.shipExhaust.x=this.player.x+30):this.cursors.right.isDown&&(this.player.body.acceleration.x=BasicGame.PLAYER_ACCELERATION,this.player.rotation+=.324,this.shipExhaust.on=!0,this.shipExhaust.x=this.player.x-30),this.cursors.up.isDown?(this.player.body.acceleration.y=-BasicGame.PLAYER_ACCELERATION,this.shipExhaust.on=!0):this.cursors.down.isDown&&(this.player.body.acceleration.y=BasicGame.PLAYER_ACCELERATION,this.shipExhaust.on=!0),this.input.activePointer.isDown&&this.physics.arcade.distanceToPointer(this.player)>15&&this.physics.arcade.moveToPointer(this.player,this.player.speed),(this.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)||this.input.activePointer.isDown)&&(this.returnText&&this.returnText.exists?(this.quitGame(),this.soundtrack.destroy()):this.fire()),this.bombKey.isDown&&this.launchBomb(),this.shieldKey.isDown&&this.deployShield(),this.muteKey.isDown?this.game.sound.mute=!0:this.unMuteKey.isDown&&(this.game.sound.mute=!1)},processDelayedEffects:function(){this.instructions.exists&&this.time.now>this.instExpire&&this.instructions.destroy(),this.ghostUntil&&this.ghostUntil<this.time.now&&(this.ghostUntil=null,this.player.play("fly")),this.showReturn&&this.time.now>this.showReturn&&(this.returnText=this.add.text(this.game.width/2,this.game.height/2+40,"Press SPACEBAR to go back to Main Menu",{font:"16px sans-serif",fill:"#fff"}),this.returnText.anchor.setTo(.5,.5),this.showReturn=!1),this.bossApproaching&&this.boss.y>80&&(this.bossApproaching=!1,this.boss.nextShotAt=0,this.boss.body.velocity.y=0,this.boss.body.velocity.x=BasicGame.BOSS_X_VELOCITY,this.boss.body.bounce.x=1,this.boss.body.collideWorldBounds=!0)},playerHit:function(s,t){if(!(this.ghostUntil&&this.ghostUntil>this.time.now)){this.playerExplosionSFX.play(),this.damageEnemy(t,BasicGame.CRASH_DAMAGE);var e=this.lives.getFirstAlive();null!==e&&0===this.weaponLevel?(e.kill(),this.powerupText.text="PowerUp: "+this.weaponLevel,this.ghostUntil=this.time.now+BasicGame.PLAYER_GHOST_TIME,this.player.play("ghost")):null!==e&&this.weaponLevel>0?(e.kill(),this.weaponLevel--,this.powerupText.text="PowerUp: "+this.weaponLevel,this.ghostUntil=this.time.now+BasicGame.PLAYER_GHOST_TIME,this.player.play("ghost")):(this.explode(s),s.kill(),this.shipExhaust.kill(),this.displayEnd(!1))}},enemyHit:function(s,t){s.kill(),this.damageEnemy(t,s.body.BULLET_DAMAGE),this.boss.alive&&(this.bossHealthText.text="Boss Health: "+this.boss.health)},damageEnemy:function(s,t){s.damage(t),s.alive?s.play("hit"):(this.explode(s),this.explosionSFX.play(),this.dropWeaponPowerUp(s),this.dropBombPowerUp(s),this.dropShieldPowerUp(s),this.addToScore(s.reward),"boss"===s.key&&(this.enemyPool.destroy(),this.shooterPool.destroy(),this.bossPool.destroy(),this.enemyBulletPool.destroy(),this.bossHealthText.text="Boss Health: 0",this.displayEnd(!0)))},dropWeaponPowerUp:function(s){if(0!==this.powerUpPool.countDead()&&5!==this.weaponLevel&&this.rnd.frac()<s.dropRate){var t=this.powerUpPool.getFirstExists(!1);t.reset(s.x,s.y),t.body.velocity.y=BasicGame.POWERUP_VELOCITY}},dropBombPowerUp:function(s){if(0!==this.bombPowerUpPool.countDead()&&this.rnd.frac()<s.bombDropRate){var t=this.bombPowerUpPool.getFirstExists(!1);t.reset(s.x,s.y),t.body.velocity.y=BasicGame.POWERUP_VELOCITY}},dropShieldPowerUp:function(s){if(0!==this.shieldPowerUpPool.countDead()&&this.rnd.frac()<s.shieldDropRate){var t=this.shieldPowerUpPool.getFirstExists(!1);t.reset(s.x,s.y),t.body.velocity.y=BasicGame.POWERUP_VELOCITY}},playerGetsWeaponPowerUp:function(s,t){this.addToScore(t.reward),t.kill(),this.powerUpSFX.play(),this.weaponLevel<5&&this.weaponLevel++,this.powerupText.text="PowerUp: "+this.weaponLevel},playerGetsBomb:function(s,t){t.kill(),this.powerUpSFX.play(),this.bombCount++,this.bombPowerupText.text="Bombs: "+this.bombCount},playerGetsShield:function(s,t){t.kill(),this.powerUpSFX.play(),this.shieldCount++,this.shieldPowerupText.text="Shields: "+this.shieldCount},launchBomb:function(){if(this.player.alive&&!(this.nextBombAt>this.time.now)){this.nextBombAt=this.time.now+this.bombShotDelay;var s;this.bombCount>0&&(s=this.bombPool.getFirstExists(!1),s.reset(this.player.x,this.player.y-50),s.body.velocity.y=-500,s.body.DAMAGE=BasicGame.BOMB_DAMAGE,this.bombCount--,this.bombPowerupText.text="Bombs: "+this.bombCount)}},bombHit:function(s,t){s.kill(),this.damageEnemy(t,s.body.DAMAGE),this.bombBlast(s),this.boss.alive&&(this.bossHealthText.text="Boss Health: "+this.boss.health)},bombBlast:function(s){if(0!==this.bombBlastPool.countDead()){var t=this.bombBlastPool.getFirstExists(!1);t.reset(s.x,s.y),t.play("bang",15,!1,!0),t.body.velocity.x=s.body.velocity.x,t.body.velocity.y=s.body.velocity.y,t.body.DAMAGE=BasicGame.BOMB_DAMAGE}},bombBlastHit:function(s,t){this.damageEnemy(t,s.body.DAMAGE),this.boss.alive&&(this.bossHealthText.text="Boss Health: "+this.boss.health)},deployShield:function(){!this.player.alive||this.shieldRecharge>this.time.now||(this.shieldDeployDelay=3*Phaser.Timer.SECOND,this.shieldRecharge=this.time.now+this.shieldDeployDelay,this.shieldCount>0&&(this.ghostUntil=this.time.now+BasicGame.PLAYER_SHIELD_TIME,this.player.play("shield"),this.shieldCount--,this.shieldPowerupText.text="Shields: "+this.shieldCount))},makeBullet:function(s,t){var e,i=60*Math.sin(this.game.math.degToRad(this.player.angle));e=this.bulletPool.getFirstExists(!1),e.reset(this.player.x+i,this.player.y-40),e.angle=this.player.angle,this.game.physics.arcade.velocityFromAngle(e.angle-90,BasicGame.PLAYER_BULLET_VELOCITY,e.body.velocity),e.body.velocity.x+=this.player.body.velocity.x,e.body.velocity.y=-BasicGame.PLAYER_BULLET_VELOCITY-s,e.body.BULLET_DAMAGE=BasicGame.BULLET_DAMAGE+t},makeBulletSpray:function(s,t){var e=1;bullet=this.bulletPool.getFirstExists(!1),bullet.reset(this.player.x,this.player.y-40),bullet.body.velocity.y=-BasicGame.PLAYER_BULLET_VELOCITY-s,bullet.body.BULLET_DAMAGE=BasicGame.BULLET_DAMAGE+t,bullet=this.bulletPool.getFirstExists(!1),bullet.body.BULLET_DAMAGE=BasicGame.BULLET_DAMAGE+t,bullet.reset(this.player.x-(10+6*e),this.player.y-40),this.physics.arcade.velocityFromAngle(-95-10*e,BasicGame.PLAYER_BULLET_VELOCITY+s,bullet.body.velocity),bullet=this.bulletPool.getFirstExists(!1),bullet.body.BULLET_DAMAGE=BasicGame.BULLET_DAMAGE+3,bullet.reset(this.player.x+(10+6*e),this.player.y-40),this.physics.arcade.velocityFromAngle(-85+10*e,BasicGame.PLAYER_BULLET_VELOCITY+s,bullet.body.velocity)},fire:function(){if(this.player.alive&&!(this.nextShotAt>this.time.now))if(this.nextShotAt=this.time.now+this.shotDelay,this.playerFireSFX.play(),0===this.weaponLevel){if(0===this.bulletPool.countDead())return;this.makeBullet(0,0)}else 1===this.weaponLevel?this.makeBullet(100,0):2===this.weaponLevel?this.makeBullet(100,1):3===this.weaponLevel?this.makeBullet(200,2):4===this.weaponLevel?this.makeBullet(400,3):this.makeBulletSpray(600,3)},addToScore:function(s){this.score+=s,this.scoreText.text=this.score,this.score>=BasicGame.BOSS_APPROACH&&1==this.bossPool.countDead()&&this.spawnBoss()},spawnBoss:function(){this.bossApproaching=!0,this.boss.reset(this.game.width/2,0,BasicGame.BOSS_HEALTH),this.physics.enable(this.boss,Phaser.Physics.ARCADE),this.boss.body.velocity.y=BasicGame.BOSS_Y_VELOCITY,this.boss.play("fly")},explode:function(s){if(0!==this.explosionPool.countDead()){var t=this.explosionPool.getFirstExists(!1);t.reset(s.x,s.y),t.play("boom",20,!1,!0),t.body.velocity.x=s.body.velocity.x,t.body.velocity.y=s.body.velocity.y}},displayEnd:function(s){if(!this.endText||!this.endText.exists){var t=s?"Boss Defeated":"You Failed Us";this.endText=this.add.text(this.game.width/2,this.game.height/2-80,t,{font:"72px serif",fill:"#7CFC00"}),this.endText.anchor.setTo(.5,0),this.showReturn=this.time.now+BasicGame.RETURN_MESSAGE_DELAY}},quitGame:function(s){this.space.destroy(),this.player.destroy(),this.enemyPool.destroy(),this.bulletPool.destroy(),this.explosionPool.destroy(),this.shooterPool.destroy(),this.enemyBulletPool.destroy(),this.powerUpPool.destroy(),this.bossPool.destroy(),this.instructions.destroy(),this.scoreText.destroy(),this.endText.destroy(),this.returnText.destroy(),this.state.start("MainMenu")}};